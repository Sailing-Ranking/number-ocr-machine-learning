schema: '2.0'
stages:
  train:
    cmd: pipenv run python src/02_train.py
    params:
      params.yaml:
        compile.metrics: accuracy
        model.activation: relu
        model.filters: 32
        model.input_shape:
        - 28
        - 28
        - 1
        model.kernel_initializer: he_uniform
        model.kernel_size:
        - 3
        - 3
        model.out_activation: softmax
        model.pooling:
        - 2
        - 2
        train.epochs: 2
        train.validation_split: 0.25
    outs:
    - path: data/experiment/cnn_classifier
      md5: c380e1bf678ec5cfa8b610455afb65fd.dir
      size: 1103956
      nfiles: 5
    - path: data/experiment/history.json
      md5: f4e7ce7c5d9fdadd93fe3a96108500b6
      size: 218
  visualize:
    cmd: pipenv run python src/04_visualize.py
    deps:
    - path: data/experiment/history.json
      md5: f4e7ce7c5d9fdadd93fe3a96108500b6
      size: 218
    - path: data/experiment/metrics.json
      md5: 367945eca0546a99eee8c1979a4f9b26
      size: 97
    outs:
    - path: data/experiment/plots/acc_vs_val_acc.png
      md5: 46e6f4e0c8b4b9bbc22d886ad0070c81
      size: 37336
    - path: data/experiment/plots/loss_vs_val_loss.png
      md5: c48757ccd2c7ed78977c2be31f091a27
      size: 36491
  evaluate:
    cmd: pipenv run python src/03_evaluate.py
    deps:
    - path: data/experiment/cnn_classifier
      md5: c380e1bf678ec5cfa8b610455afb65fd.dir
      size: 1103956
      nfiles: 5
    outs:
    - path: data/experiment/metrics.json
      md5: 367945eca0546a99eee8c1979a4f9b26
      size: 97
  setup:
    cmd: pipenv run python src/01_setup.py
